(this["webpackJsonptuyendungvn-admin-frontend-reactjs"]=this["webpackJsonptuyendungvn-admin-frontend-reactjs"]||[]).push([[42],{895:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(9),s=n(24),i=n(0),o=n(38),l=n(37),b=n(708);b.a.initializeApp({apiKey:"AIzaSyApTHegj-vL4AD6UV7hqlavK7pvW3KOf5o",authDomain:"tuyendungvn-ec100.firebaseapp.com",databaseURL:"https://tuyendungvn-ec100-default-rtdb.firebaseio.com",projectId:"tuyendungvn-ec100",storageBucket:"tuyendungvn-ec100.appspot.com",messagingSenderId:"45165647490",appId:"1:45165647490:web:6df36b37446ebc2a43869b",measurementId:"G-L4S0234ZKC"});var u=b.a,d=(n(709),n(7)),j=n(119),m=n(134),p=n(582),h=n(86),f=n(3),x=function(e){var t=e.type,n=void 0===t?"text":t,r=e.className,c=void 0===r?"":r,a=e.initialValue,o=void 0===a?"":a,l=e.Icon,b=e.valueRef,u=e.placeholder,d=void 0===u?"":u,j=e.maxLength,m=e.onChange,x=e.error,O=e.onPressEnter,g=e.label,v=e.required,y=e.pattern,N=void 0===y?"":y,w=e.minLength,k=Object(i.useState)(o),I=Object(s.a)(k,2),L=I[0],S=I[1],V=Object(i.useState)(Object(h.c)()),R=Object(s.a)(V,2),A=R[0];R[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"flex flex-col justify-center",children:[Object(f.jsxs)("label",{htmlFor:A,className:"mb-0.5 font-bold text-md phone:text-lg",children:[g,v&&Object(f.jsx)("span",{className:"text-error",children:"*"})]}),Object(f.jsxs)("label",{htmlFor:A,className:"flex flex-row border border-gray mb-0.5 ",children:[l?Object(f.jsx)("div",{className:"icon-wrapper w-5.5 text-primary font-bold flex items-center justify-center text-md",children:l}):"",Object(f.jsx)("input",{id:A,className:"w-full h-full px-1 py-1.5 text-md font-medium font-sfpro ".concat(c),placeholder:d,type:n,value:L,maxLength:j,onChange:function(e){var t=e.target.value;e.target.value.length>e.target.maxLength&&(t=e.target.value.slice(0,e.target.maxLength)),S(t),b&&(b.current=t),m&&m(t)},onKeyDown:function(e){"Enter"===e.key&&O&&O(L)},pattern:N,minLength:w})]})]}),x&&Object(f.jsx)(p.a,{error:!0,variant:"outlined",style:{fontSize:"16px"},children:x})]})},O=n(5),g=n(63),v=n(131),y=n(10),N=n(43),w=n(539),k=["to","className","children"],I=function(e){var t=Object(o.g)(),n=e.to,r=e.className,c=void 0===r?"":r,a=e.children,s=Object(N.a)(e,k);return Object(f.jsx)("div",{className:"button-wrapper border-white border rounded-sm h-full ".concat(c),children:Object(f.jsx)(w.a,Object(y.a)(Object(y.a)({className:"w-full",style:{padding:"0"},onClick:function(){n&&setTimeout((function(){t.push(n)}),300)}},s),{},{children:Object(f.jsx)("div",{className:"flex items-center bg-primary font-sfpro text-lg phone:text-xl font-medium text-white justify-center  w-full leading-none rounded-md py-1.5",children:a})}))})},L={appVerifier:void 0,confirmResult:void 0};u.auth().settings.appVerificationDisabledForTesting=!0;t.default=function(){var e=Object(o.g)(),t=Object(l.d)(),n=Object(i.useState)(!1),r=Object(s.a)(n,2),b=r[0],p=r[1],y=Object(i.useState)(""),N=Object(s.a)(y,2),w=N[0],k=N[1],S=Object(i.useState)(""),V=Object(s.a)(S,2),R=V[0],A=V[1],C=Object(i.useState)(""),E=Object(s.a)(C,2),T=(E[0],E[1]),P=Object(i.useState)("success"),z=Object(s.a)(P,2),D=(z[0],z[1]),K=Object(i.useState)(""),U=Object(s.a)(K,2),q=U[0],F=U[1],G=Object(l.e)((function(e){return e.auth})).currentUser,H=function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="+84".concat(n.slice(1,n.length)),t(Object(O.c)(!0)),a=new u.auth.RecaptchaVerifier("captcha",{size:"invisible"}),L.appVerifier=a,e.prev=4,e.next=7,u.auth().signInWithPhoneNumber(r,L.appVerifier);case 7:(s=e.sent)||(F(Object(d.b)("login.error-message.invalid-phone-number")),D("error")),F(""),p(!0),t(Object(O.c)(!1)),L.confirmResult=s,e.next=21;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0),t(Object(O.c)(!1)),F(Object(d.b)("login.error-message.invalid-phone-number")),D("error");case 21:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(Object(O.c)(!0)),!L.confirmResult){e.next=15;break}return e.prev=2,e.next=5,L.confirmResult.confirm(n);case 5:e.sent&&(M(),F("")),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),F(Object(d.b)("login.error-message.wrong-otp")),D("error"),t(Object(O.c)(!1));case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(a.a)(c.a.mark((function e(){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(n=u.auth())||void 0===n?void 0:n.currentUser)){e.next=9;break}return e.next=4,null===(r=u.auth().currentUser)||void 0===r?void 0:r.getIdToken(!0);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="";case 7:a=e.t0,t(Object(m.b)({idToken:a}));case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(0),console.error(e.t1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var n,r;G&&Object.keys(G).length&&(Object(j.d)(G),t(Object(O.c)(!1)),"ADMIN"===(r=null===G||void 0===G||null===(n=G.userInfo)||void 0===n?void 0:n.permission)||"MANAGER"===r?(T(Object(d.b)("login.success-message.login")),setTimeout((function(){e.push("/dashboard/overview")}),2500)):(T(Object(d.b)("login.error-message.permission")),D("warning"),Object(j.c)(),t(Object(m.a)())))}),[G]),Object(f.jsxs)("div",{className:"items-center grid-cols-2 laptop:grid bg-primary",children:[Object(f.jsx)("div",{className:"z-10 grid items-center h-full min-h-screen bg-white",children:Object(f.jsxs)("div",{className:"max-w-lg px-2 mx-auto phone:px-5 font-sfpro leading-none",children:[Object(f.jsxs)("div",{className:"mb-4 text-2xl text-center text-primary laptop:text-left phone:text-3xl",children:[Object(f.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:Object(d.b)("login.title")}),Object(f.jsx)("span",{className:"block text-lg font-medium leading-normal phone:text-xl",children:Object(d.b)("login.message")})]}),Object(f.jsxs)("div",{className:"mb-1 text-black rounded",children:[b?Object(f.jsx)(x,{label:Object(d.b)("login.otp"),initialValue:R,className:"bg-white",Icon:"",type:"number",placeholder:Object(d.b)("login.action.otp"),onChange:function(e){A(e)},maxLength:6,onPressEnter:J,required:!0},"OPT"):Object(f.jsx)(x,{label:Object(d.b)("login.phone"),onChange:function(e){k(e)},minLength:10,maxLength:11,initialValue:w,type:"number",className:"bg-white",placeholder:Object(d.b)("login.phone"),Icon:"+84",onPressEnter:H,required:!0,pattern:h.e},"PHONE"),q&&Object(f.jsxs)("span",{className:"flex flex-row text-sm text-error",children:[Object(f.jsx)(g.a,{name:"common/error-icon",className:"mr-0.5 text-error"}),q]})]}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(I,{onClick:function(){b?J(R):H(w)},className:"w-full bg-primary",children:Object(d.b)("login.action.login")})})]})}),Object(f.jsx)("div",{className:"relative self-stretch hidden min-h-screen pr-10 laptop:flex",children:Object(f.jsx)(v.b,{className:"inline-block mx-auto align-middle"})}),Object(f.jsx)("div",{id:"captcha"})]})}}}]);
//# sourceMappingURL=42.e55177b8.chunk.js.map